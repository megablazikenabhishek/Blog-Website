window.innerWidth<768&&[].slice.call(document.querySelectorAll("[data-bss-disabled-mobile]")).forEach((function(e){e.classList.remove("animated"),e.removeAttribute("data-bss-hover-animate"),e.removeAttribute("data-aos"),e.removeAttribute("data-bss-parallax-bg"),e.removeAttribute("data-bss-scroll-zoom")})),document.addEventListener("DOMContentLoaded",(function(){[].slice.call(document.querySelectorAll("[data-bss-hover-animate]")).forEach((function(e){e.addEventListener("mouseenter",(function(e){e.target.classList.add("animated",e.target.dataset.bssHoverAnimate)})),e.addEventListener("mouseleave",(function(e){e.target.classList.remove("animated",e.target.dataset.bssHoverAnimate)}))}))}),!1);const body_input=document.querySelector(".body-input"),author_input=document.querySelector(".task-input"),task_form=document.querySelector(".task-form"),submit_btn=document.querySelector(".submit-btn"),showFeed=async()=>{await fetch("/api/tasks",{method:"GET",redirect:"follow"}).then((e=>e.json())).then((e=>{let{task:t}=e;for(let e=0;e<t.length;e++){let n=document.createElement("section");n.classList.add("feed-container");let o=t[e].body;console.log(t[e].date),n.innerHTML=`\n                <div class="single-task">\n                    <h9>${o}</h9>\n                    <h6>by ${t[e].author} on ${t[e].date}</h6>\n                    <div class="task-links">\n                        \x3c!-- like link --\x3e\n                        <a class="edit-link" id="${t[e]._id}0">\n                            <img src="./img/icons8-facebook-like-24.png" />\n                            <p>${t[e].meta.likes}</p>\n                        </a>\n                        \x3c!-- dislike btn --\x3e\n                        <a class="edit-link" id="${t[e]._id}1">\n                            <img src="./img/icons8-thumbs-down-24.png" />\n                            <p>${t[e].meta.dislikes}</p>\n                        </a>\n                    </div>\n                </div>\n            `,document.querySelector("body").appendChild(n),document.getElementById(`${t[e]._id}0`).addEventListener("click",likeBlog),document.getElementById(`${t[e]._id}1`).addEventListener("click",dislikeBlog)}})).catch((e=>console.log("error",e)))},postBlog=async()=>{const e=author_input.value,t=body_input.value;if(""===e||""==t)return void alert("Invalid Input");let n=new Headers;n.append("Content-Type","application/json");let o={method:"POST",headers:n,body:JSON.stringify({author:e,body:t}),redirect:"follow"};await fetch("/api/tasks",o).then((e=>e.text())).then((e=>console.log(e))).catch((e=>console.log("error",e))),location.reload()},likeBlog=async e=>{if(e.currentTarget.children[0].src.includes("dark"))return;const t=e.currentTarget.id;e.currentTarget.children[0].src="./img/icons8-facebook-like-24-dark.png";let n=e.currentTarget.children[1];val=n.textContent,n.textContent=`${Number(val)+1}`,like=Number(n.textContent);let o=e.currentTarget.parentElement.children[1].children[1].textContent;o=Number(o);let r=new Headers;r.append("Content-Type","application/json");let a={method:"PATCH",headers:r,body:JSON.stringify({meta:{likes:like,dislikes:o}}),redirect:"follow"};await fetch("/api/tasks/"+t.substring(0,t.length-1),a).then((e=>e.json())).then((e=>console.log(e))).catch((e=>console.log("error",e)))},dislikeBlog=async e=>{if(e.currentTarget.children[0].src.includes("dark"))return;const t=e.currentTarget.id;e.currentTarget.children[0].src="./img/icons8-thumbs-down-24-dark.png";let n=e.currentTarget.children[1];val=n.textContent,n.textContent=`${Number(val)+1}`,n=Number(n.textContent);let o=e.currentTarget.parentElement.children[0].children[1].textContent;o=Number(o);let r=new Headers;r.append("Content-Type","application/json");let a={method:"PATCH",headers:r,body:JSON.stringify({meta:{likes:o,dislikes:n}}),redirect:"follow"};await fetch("/api/tasks/"+t.substring(0,t.length-1),a).then((e=>e.json())).then((e=>console.log(e))).catch((e=>console.log("error",e)))};submit_btn.addEventListener("click",(e=>{e.preventDefault(),postBlog()})),task_form.addEventListener("submit",(e=>{e.preventDefault(),postBlog()})),showFeed();